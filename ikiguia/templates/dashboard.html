{% extends 'base.html' %}
{% block content %}
<div class="dashboard-container">

  <h2 class="dashboard-title">Â¡Bienvenido, {{ user.username }}! ğŸ‰</h2>
  <p class="dashboard-subtitle">Tu camino vocacional comienza hoy</p>

  <!-- SecciÃ³n de tests -->
  <div class="card-grid">
   
    <a href="{% url 'test' %}" class="card-link">
    <div class="card">
      <h3>ğŸ§ªTest Psicometrico</h3>
    </div>
    </a>
    <a href="{% url 'test_ikigai' %}" class="card-link">
    <div class="card">
      <h3>ğŸ§­ Test IKIGAI</h3>
    </div>
    </a>
  </div>

  <!-- Ãšltimo resultado del test -->
  {% if user.testresult_set.last %}
  <div class="card wide">
    <h3>ğŸ§  Ãšltimo resultado del Test PsicomÃ©trico</h3>
    <ul class="test-list">
      {% with respuestas=user.testresult_set.last.respuestas %}
      <li><strong>ğŸ¤ Me gusta trabajar en equipo:</strong> {{ respuestas.pregunta1 }}/5</li>
      <li><strong>ğŸ§© Disfruto resolver problemas complejos:</strong> {{ respuestas.pregunta2 }}/5</li>
      <li><strong>ğŸ› ï¸ Prefiero tareas prÃ¡cticas y manuales:</strong> {{ respuestas.pregunta3 }}/5</li>
      <li><strong>ğŸ”¬ Me interesan los temas cientÃ­ficos:</strong> {{ respuestas.pregunta4 }}/5</li>
      <li><strong>ğŸ’ Me gusta ayudar a otras personas:</strong> {{ respuestas.pregunta5 }}/5</li>
      {% endwith %}
    </ul>
    {% if analisis %}
      <div class="test-analysis">
        <h4>ğŸ“Š AnÃ¡lisis de tu perfil:</h4>
        <p>{{ analisis }}</p>
      </div>
    {% endif %}
  </div>
  {% else %}
    <p>â— No has completado ningÃºn test aÃºn.</p>
  {% endif %}

  <!-- IKIGAI -->
  {% if user.ikigairesult_set.last %}
  <div class="card wide">
    <h3>ğŸ§­ Tu Mapa IKIGAI Personal</h3>
    <div class="ikigai-grid">
      <div>
        <h4>â¤ï¸ Lo que amas</h4>
        {% for item in ikigai.ama %}
          <p>â€¢ {{ item }}</p>
        {% endfor %}
      </div>
      <div>
        <h4>ğŸ’ª Lo que haces bien</h4>
        {% for item in ikigai.bueno %}
          <p>â€¢ {{ item }}</p>
        {% endfor %}
      </div>
      <div>
        <h4>ğŸ’° Por lo que pueden pagarte</h4>
        {% for item in ikigai.pagado %}
          <p>â€¢ {{ item }}</p>
        {% endfor %}
      </div>
      <div>
        <h4>ğŸŒ Lo que el mundo necesita</h4>
        {% for item in ikigai.necesario %}
          <p>â€¢ {{ item }}</p>
        {% endfor %}
      </div>
    </div>
  </div>
  {% else %}
    <p>â— AÃºn no has completado el test IKIGAI.</p>
  {% endif %}

  <!-- MentorÃ­as -->
  {% if mentorias %}
  <div class="card wide">
    <h3>ğŸ“Œ MentorÃ­as Agendadas</h3>
    <div class="mentorias-grid">
      {% for mentoria in mentorias %}
      <div class="mentoria-card">
        <h4>ğŸ‘¨â€ğŸ« {{ mentoria.mentor.nombre }}</h4>
        <p><strong>ğŸ¯ Especialidad:</strong> {{ mentoria.mentor.especialidad }}</p>
        <p><strong>ğŸ“… Fecha:</strong> {{ mentoria.fecha }}</p>
        <p><strong>â° Hora:</strong> {{ mentoria.hora }}</p>
      </div>
      {% endfor %}
    </div>
  </div>
  {% else %}
    <p>â— No has agendado mentorÃ­as aÃºn.</p>
  {% endif %}
  {% if carreras %}
  <h3>ğŸ“ Carreras recomendadas segÃºn tu perfil</h3>
  <div class="carreras-grid">
    {% for carrera in carreras %}
      <div class="carrera-card">
        <h4>ğŸ“˜ {{ carrera.nombre }}</h4>
        <p><strong>Ãrea:</strong> {{ carrera.area }}</p>
        <p>{{ carrera.descripcion }}</p>
      </div>
    {% endfor %}
  </div>
{% else %}
  <p>No hay recomendaciones aÃºn. Completa el test para obtener sugerencias.</p>
{% endif %}

</div>
{% endblock %}
